<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright:           Â©  2017 Infolava GmbH  All rights reserved.
 ================================================================================
    This file is part of TransALM

    TransALM is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that</group> it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<openerp>
	<data>

		<record model="ir.actions.act_window" id="action_calendar_provider_tree_all">
			<field name="name">Calendar Provider</field>
			<field name="res_model">calendar.provider</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<menuitem id="menu_calendar_provider" name="Calendar Provider" 
			parent="calendar.menu_calendar_configuration" action="action_calendar_provider_tree_all"/>
	
		<record model="ir.ui.view" id="calendar_provider_tree">
			<field name="name">calendar.provider.tree</field>
			<field name="model">calendar.provider</field>
			<field name="arch" type="xml">
				<tree string="Calendar Providers">
					<field name="provider_name" />
					<field name="provider_url" />
					<field name="provider_api_key" />
					<field name="sequence"/>
				</tree>
			</field>
		</record>

		<record model="ir.ui.view" id="calendar_provider_form">
			<field name="name">calendar.provider.form</field>
			<field name="model">calendar.provider</field>
			<field name="arch" type="xml">
				<form string="Calendar Provider">
					<sheet>
						<group>
							<field name="provider_name" />
							<field name="sequence" />
							<field name="provider_url" />
							<field name="provider_api_key" />
							<field name="description" />
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="calendar_provider_config_tree">
			<field name="name">calendar.provider.config.tree</field>
			<field name="model">api.config</field>
			<field name="arch" type="xml">
				<form>
					<field name="provider_ids" widget="one2many_list" options="{'no_create': True}">
						<tree string="Calendar Provider" editable="top" create="0" delete="0">
							<field name="provider_name" />
							<field name="provider_api_key" />
						</tree>
					</field>
					<footer>
						<button name="action_next" type="object" string="Apply" class="oe_highlight" />
						or
						<button name="action_skip" type="object" special="cancel"
							string="Cancel" class="oe_link" />
					</footer>
				</form>
			</field>
		</record>
		
		<record id="action_calendar_provider_config_apikey" model="ir.actions.act_window">
			<field name="name">Configure Calendar Provider API Key</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">api.config</field>
			<field name="view_id" ref="calendar_provider_config_tree" />
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="target">new</field>
		</record>
	
		<record id="action_calendar_provider_config_apikey_todo" model="ir.actions.todo">
			<field name="action_id" ref="action_calendar_provider_config_apikey" />
			<field name="sequence">0</field>
			<field name="type">automatic</field>
		</record>

	</data>
</openerp>
